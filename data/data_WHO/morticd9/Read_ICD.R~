ICD9 <- read.table("Morticd9",sep=",",header=TRUE)
# 5020,Australia;4010,Austria;4020,Belgium;2090,Canada;4050,Denmark;4070,Finland;4080,France;4140,Greece;4150,Hungary;4160,Iceland;4170,Ireland;4180,Italy;3160,Japan;4190,Luxembourg;4210,Netherlands;4220,Norway;4230,Poland;4240,Portugal;5150,New Zealand;4280,Spain;4290,Sweden;4300,Switzerland;4308,United Kingdom;2450,United States of America

mycountry <- c(5020,4010,4020,2090,4050,4070,4080,4140,4150,4160,4170,4180,3160,4190,4210,4220,4230,4240,5150,4280,4290,4300,4308,2450)

ICD9 <- ICD9[which(ICD9$Country %in% mycountry),]

colnames(ICD9)[10:35] <- c("All","Age0","Age1","Age2","Age3","Age4","Age5-9","Age10-14","Age15-19","Age20-24","Age25-29","Age30-34","Age35-39","Age40-44","Age45-49","Age50-54","Age55-59","Age60-64","Age65-69","Age70-74","Age75-79","Age80-84","Age85-89","Age90-94","Age95+","AgeUNK")

InfectList <- c("B01", "B02", "B03", "B04", "B05", "B06", "B07")
NeopList <- c("B08","B09", "B100", "B109", "B11", "B12","B13", "B14", "B15", "B16", "B17")
LungList <- c("B101")
EndocList <- c("B18","B19")
CircList <- c("B25", "B26", "B27", "B28", "B29","B30")
RespList <- c("B31", "B32")
DigestList <- c("B33", "B34")
ExternList <- c("B47", "B48", "B49","B50","B51","B52","B53","B54","B55","B56")
OthList <- c("B46")

ICD9$CauseM <- NA
ICD9$CauseM <- ifelse(ICD9$Cause%in%InfectList, 1,ICD9$CauseM)
ICD9$CauseM <- ifelse(ICD9$Cause%in%NeopList, 2,ICD9$CauseM)
ICD9$CauseM <- ifelse(ICD9$Cause%in%LungList, 3,ICD9$CauseM)
ICD9$CauseM <- ifelse(ICD9$Cause%in%EndocList, 4,ICD9$CauseM)
ICD9$CauseM <- ifelse(ICD9$Cause%in%CircList, 5,ICD9$CauseM)
ICD9$CauseM <- ifelse(ICD9$Cause%in%RespList, 6,ICD9$CauseM)
ICD9$CauseM <- ifelse(ICD9$Cause%in%DigestList, 7,ICD9$CauseM)
ICD9$CauseM <- ifelse(ICD9$Cause%in%ExternList, 8,ICD9$CauseM)
ICD9$CauseM <- ifelse(ICD9$Cause%in%OthList, 9,ICD9$CauseM)
#ICD9$CauseM <- ifelse(is.na(ICD9$CauseM), 9,ICD9$CauseM)

AllDeaths <- ICD9[ICD9$Cause=="B00",c(1,4,7,8,10:35)]
SpecDeaths <- ICD9[!is.na(ICD9$CauseM),]
AggS.Deaths <- aggregate(SpecDeaths[,c(10:35)], by=SpecDeaths[,c("Country","Year","Sex","CauseM")], sum) 



AllDeaths2 <- reshape(AllDeaths,varying = c("All","Age0","Age1","Age2","Age3","Age4","Age5-9","Age10-14", "Age15-19","Age20-24", "Age25-29", "Age30-34", "Age35-39", "Age40-44", "Age45-49", "Age50-54", "Age55-59","Age60-64", "Age65-69", "Age70-74", "Age75-79", "Age80-84", "Age85-89", "Age90-94", "Age95+","AgeUNK"),timevar="Age", times=c("All","0","1","2","3","4","5-9","10-14", "15-19","20-24", "25-29", "30-34", "35-39", "40-44", "45-49", "50-54", "55-59","60-64", "65-69", "70-74", "75-79", "80-84", "85-89", "90-94", "95+","UNK"),direction="long",v.names = "Counts")

AggS.Deaths2 <- reshape(AggS.Deaths,varying = c("All","Age0","Age1","Age2","Age3","Age4","Age5-9","Age10-14", "Age15-19","Age20-24", "Age25-29", "Age30-34", "Age35-39", "Age40-44", "Age45-49", "Age50-54", "Age55-59","Age60-64", "Age65-69", "Age70-74", "Age75-79", "Age80-84", "Age85-89", "Age90-94", "Age95+","AgeUNK"),timevar="Age", times=c("All","0","1","2","3","4","5-9","10-14", "15-19","20-24", "25-29", "30-34", "35-39", "40-44", "45-49", "50-54", "55-59","60-64", "65-69", "70-74", "75-79", "80-84", "85-89", "90-94", "95+","UNK"),direction="long",v.names = "Counts")
